{"version":3,"file":"gawd-player.esm.min.js","sources":["../node_modules/detect-browser/es/index.js","../src/components/player.ts"],"sourcesContent":["var __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nvar BrowserInfo = /** @class */ (function () {\n    function BrowserInfo(name, version, os) {\n        this.name = name;\n        this.version = version;\n        this.os = os;\n        this.type = 'browser';\n    }\n    return BrowserInfo;\n}());\nexport { BrowserInfo };\nvar NodeInfo = /** @class */ (function () {\n    function NodeInfo(version) {\n        this.version = version;\n        this.type = 'node';\n        this.name = 'node';\n        this.os = process.platform;\n    }\n    return NodeInfo;\n}());\nexport { NodeInfo };\nvar SearchBotDeviceInfo = /** @class */ (function () {\n    function SearchBotDeviceInfo(name, version, os, bot) {\n        this.name = name;\n        this.version = version;\n        this.os = os;\n        this.bot = bot;\n        this.type = 'bot-device';\n    }\n    return SearchBotDeviceInfo;\n}());\nexport { SearchBotDeviceInfo };\nvar BotInfo = /** @class */ (function () {\n    function BotInfo() {\n        this.type = 'bot';\n        this.bot = true; // NOTE: deprecated test name instead\n        this.name = 'bot';\n        this.version = null;\n        this.os = null;\n    }\n    return BotInfo;\n}());\nexport { BotInfo };\nvar ReactNativeInfo = /** @class */ (function () {\n    function ReactNativeInfo() {\n        this.type = 'react-native';\n        this.name = 'react-native';\n        this.version = null;\n        this.os = null;\n    }\n    return ReactNativeInfo;\n}());\nexport { ReactNativeInfo };\n// tslint:disable-next-line:max-line-length\nvar SEARCHBOX_UA_REGEX = /alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/;\nvar SEARCHBOT_OS_REGEX = /(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\\ Jeeves\\/Teoma|ia_archiver)/;\nvar REQUIRED_VERSION_PARTS = 3;\nvar userAgentRules = [\n    ['aol', /AOLShield\\/([0-9\\._]+)/],\n    ['edge', /Edge\\/([0-9\\._]+)/],\n    ['edge-ios', /EdgiOS\\/([0-9\\._]+)/],\n    ['yandexbrowser', /YaBrowser\\/([0-9\\._]+)/],\n    ['kakaotalk', /KAKAOTALK\\s([0-9\\.]+)/],\n    ['samsung', /SamsungBrowser\\/([0-9\\.]+)/],\n    ['silk', /\\bSilk\\/([0-9._-]+)\\b/],\n    ['miui', /MiuiBrowser\\/([0-9\\.]+)$/],\n    ['beaker', /BeakerBrowser\\/([0-9\\.]+)/],\n    ['edge-chromium', /EdgA?\\/([0-9\\.]+)/],\n    [\n        'chromium-webview',\n        /(?!Chrom.*OPR)wv\\).*Chrom(?:e|ium)\\/([0-9\\.]+)(:?\\s|$)/,\n    ],\n    ['chrome', /(?!Chrom.*OPR)Chrom(?:e|ium)\\/([0-9\\.]+)(:?\\s|$)/],\n    ['phantomjs', /PhantomJS\\/([0-9\\.]+)(:?\\s|$)/],\n    ['crios', /CriOS\\/([0-9\\.]+)(:?\\s|$)/],\n    ['firefox', /Firefox\\/([0-9\\.]+)(?:\\s|$)/],\n    ['fxios', /FxiOS\\/([0-9\\.]+)/],\n    ['opera-mini', /Opera Mini.*Version\\/([0-9\\.]+)/],\n    ['opera', /Opera\\/([0-9\\.]+)(?:\\s|$)/],\n    ['opera', /OPR\\/([0-9\\.]+)(:?\\s|$)/],\n    ['pie', /^Microsoft Pocket Internet Explorer\\/(\\d+\\.\\d+)$/],\n    ['pie', /^Mozilla\\/\\d\\.\\d+\\s\\(compatible;\\s(?:MSP?IE|MSInternet Explorer) (\\d+\\.\\d+);.*Windows CE.*\\)$/],\n    ['netfront', /^Mozilla\\/\\d\\.\\d+.*NetFront\\/(\\d.\\d)/],\n    ['ie', /Trident\\/7\\.0.*rv\\:([0-9\\.]+).*\\).*Gecko$/],\n    ['ie', /MSIE\\s([0-9\\.]+);.*Trident\\/[4-7].0/],\n    ['ie', /MSIE\\s(7\\.0)/],\n    ['bb10', /BB10;\\sTouch.*Version\\/([0-9\\.]+)/],\n    ['android', /Android\\s([0-9\\.]+)/],\n    ['ios', /Version\\/([0-9\\._]+).*Mobile.*Safari.*/],\n    ['safari', /Version\\/([0-9\\._]+).*Safari/],\n    ['facebook', /FB[AS]V\\/([0-9\\.]+)/],\n    ['instagram', /Instagram\\s([0-9\\.]+)/],\n    ['ios-webview', /AppleWebKit\\/([0-9\\.]+).*Mobile/],\n    ['ios-webview', /AppleWebKit\\/([0-9\\.]+).*Gecko\\)$/],\n    ['curl', /^curl\\/([0-9\\.]+)$/],\n    ['searchbot', SEARCHBOX_UA_REGEX],\n];\nvar operatingSystemRules = [\n    ['iOS', /iP(hone|od|ad)/],\n    ['Android OS', /Android/],\n    ['BlackBerry OS', /BlackBerry|BB10/],\n    ['Windows Mobile', /IEMobile/],\n    ['Amazon OS', /Kindle/],\n    ['Windows 3.11', /Win16/],\n    ['Windows 95', /(Windows 95)|(Win95)|(Windows_95)/],\n    ['Windows 98', /(Windows 98)|(Win98)/],\n    ['Windows 2000', /(Windows NT 5.0)|(Windows 2000)/],\n    ['Windows XP', /(Windows NT 5.1)|(Windows XP)/],\n    ['Windows Server 2003', /(Windows NT 5.2)/],\n    ['Windows Vista', /(Windows NT 6.0)/],\n    ['Windows 7', /(Windows NT 6.1)/],\n    ['Windows 8', /(Windows NT 6.2)/],\n    ['Windows 8.1', /(Windows NT 6.3)/],\n    ['Windows 10', /(Windows NT 10.0)/],\n    ['Windows ME', /Windows ME/],\n    ['Windows CE', /Windows CE|WinCE|Microsoft Pocket Internet Explorer/],\n    ['Open BSD', /OpenBSD/],\n    ['Sun OS', /SunOS/],\n    ['Chrome OS', /CrOS/],\n    ['Linux', /(Linux)|(X11)/],\n    ['Mac OS', /(Mac_PowerPC)|(Macintosh)/],\n    ['QNX', /QNX/],\n    ['BeOS', /BeOS/],\n    ['OS/2', /OS\\/2/],\n];\nexport function detect(userAgent) {\n    if (!!userAgent) {\n        return parseUserAgent(userAgent);\n    }\n    if (typeof document === 'undefined' &&\n        typeof navigator !== 'undefined' &&\n        navigator.product === 'ReactNative') {\n        return new ReactNativeInfo();\n    }\n    if (typeof navigator !== 'undefined') {\n        return parseUserAgent(navigator.userAgent);\n    }\n    return getNodeVersion();\n}\nfunction matchUserAgent(ua) {\n    // opted for using reduce here rather than Array#first with a regex.test call\n    // this is primarily because using the reduce we only perform the regex\n    // execution once rather than once for the test and for the exec again below\n    // probably something that needs to be benchmarked though\n    return (ua !== '' &&\n        userAgentRules.reduce(function (matched, _a) {\n            var browser = _a[0], regex = _a[1];\n            if (matched) {\n                return matched;\n            }\n            var uaMatch = regex.exec(ua);\n            return !!uaMatch && [browser, uaMatch];\n        }, false));\n}\nexport function browserName(ua) {\n    var data = matchUserAgent(ua);\n    return data ? data[0] : null;\n}\nexport function parseUserAgent(ua) {\n    var matchedRule = matchUserAgent(ua);\n    if (!matchedRule) {\n        return null;\n    }\n    var name = matchedRule[0], match = matchedRule[1];\n    if (name === 'searchbot') {\n        return new BotInfo();\n    }\n    // Do not use RegExp for split operation as some browser do not support it (See: http://blog.stevenlevithan.com/archives/cross-browser-split)\n    var versionParts = match[1] && match[1].split('.').join('_').split('_').slice(0, 3);\n    if (versionParts) {\n        if (versionParts.length < REQUIRED_VERSION_PARTS) {\n            versionParts = __spreadArray(__spreadArray([], versionParts, true), createVersionParts(REQUIRED_VERSION_PARTS - versionParts.length), true);\n        }\n    }\n    else {\n        versionParts = [];\n    }\n    var version = versionParts.join('.');\n    var os = detectOS(ua);\n    var searchBotMatch = SEARCHBOT_OS_REGEX.exec(ua);\n    if (searchBotMatch && searchBotMatch[1]) {\n        return new SearchBotDeviceInfo(name, version, os, searchBotMatch[1]);\n    }\n    return new BrowserInfo(name, version, os);\n}\nexport function detectOS(ua) {\n    for (var ii = 0, count = operatingSystemRules.length; ii < count; ii++) {\n        var _a = operatingSystemRules[ii], os = _a[0], regex = _a[1];\n        var match = regex.exec(ua);\n        if (match) {\n            return os;\n        }\n    }\n    return null;\n}\nexport function getNodeVersion() {\n    var isNode = typeof process !== 'undefined' && process.version;\n    return isNode ? new NodeInfo(process.version.slice(1)) : null;\n}\nfunction createVersionParts(count) {\n    var output = [];\n    for (var ii = 0; ii < count; ii++) {\n        output.push('0');\n    }\n    return output;\n}\n","import { SpatialType, StereoMode, SpatialPlayer, QuiltConfig, SpatialProps } from './spatial-viewer'\nimport { WebGLRenderer, PerspectiveCamera, Scene, TextureLoader, Texture, VideoTexture } from './three'\nimport { detect } from 'detect-browser';\nimport { Clock } from 'three';\nimport { PlayerProps } from '..';\n\nclass Props {\n  public url: string\n  public container: HTMLElement\n  public enableMouseMove: Boolean = true\n  public toggleModes: Boolean = false\n  public defaultThumbnailSize: number = 640\n  public defaultAsset: GawdAsset = new GawdAsset({\n    spatial: 'lookingglass',\n    quiltType: 'FourKSquare',\n    size: new Resolution({ width: 4320 }),\n    contentType: 'image/png'\n  })\n\n  public defaultMobileAsset: GawdAsset = new GawdAsset({\n    spatial: '2d',\n    size: new Resolution({ width: 1080 }),\n    contentType: 'video/mp4'\n  })\n\n  public animationAsset: GawdAsset = new GawdAsset({\n    spatial: '2d',\n    size: new Resolution({ width: 1080 }),\n    contentType: 'video/mp4'\n  })\n\n  public spatialProps: SpatialProps = {\n    spatialType: SpatialType.LOOKING_GLASS,\n    stereoMode: StereoMode.OFF,\n    quilt: null\n  }\n\n  public gawdData: Gawd // optionally pass in all the data (instead of loading via json)\n}\n\nclass Gawd {\n  public name: string\n  public hash: string\n  public assets: Array<GawdAsset>\n\n  public constructor(init?: Partial<Gawd>) {\n    Object.assign(this, init);\n  }\n}\n\nclass GawdAsset {\n  public url: string\n  public spatial: string\n  public quilt: GawdQuilt\n  public quiltType: string\n  public size: Resolution\n  public viewSize: Resolution\n  public contentType: string\n\n  public constructor(init?: Partial<GawdAsset>) {\n    Object.assign(this, init);\n  }\n}\n\nclass GawdQuilt {\n  public columns: number\n  public rows: number\n\n  public constructor(init?: Partial<GawdQuilt>) {\n    Object.assign(this, init);\n  }\n}\n\nclass Resolution {\n  public width: number\n  public height: number\n\n  public constructor(init?: Partial<Resolution>) {\n    Object.assign(this, init);\n  }\n}\n\nexport { Props as PlayerProps, Gawd, GawdAsset, GawdQuilt, Resolution }\n\nexport default class Player {\n\n  private _props: Props = new Props()\n  private scene: Scene\n  private renderer: WebGLRenderer\n  private spatialPlayer: SpatialPlayer\n  private camera: PerspectiveCamera\n  private clock: Clock\n  private gawd: Gawd\n  private video: HTMLVideoElement\n  private thumbnail: HTMLImageElement\n\n  // Animation\n  private startAngle: number = 0\n  private targetAngle: number = 0\n  private totalAngles: number = 0\n  private aniCurTime: number = 0\n  private aniDuration: number = 0.5\n\n  private hideThumbnail: boolean = false\n  private thumbCurTime: number = 0\n\n  constructor(props?: Props) {\n    this.setProps(this._props, props)\n\n    this.clock = new Clock();\n\n    if (!this._props.container) {\n      console.warn(`No container was set`)\n      return;\n    }\n\n    // If passing in gawd data direclty, then just load immediately\n    if (this._props.gawdData && this._props.gawdData.assets && this._props.gawdData.assets.length > 0) {\n      this.initGawd(this._props.gawdData)\n    }\n    // Otherwise load from json url\n    else if (this._props.url) {\n      this.loadGawdConfig(this._props.url).then(data => {\n        this.initGawd(data)\n      });\n    }\n  }\n\n  private setProps(playerProps: Props, userProps?: object): void {\n    if (!userProps) return\n\n    for (let prop in userProps) {\n      if (prop in playerProps) {\n        playerProps[prop] = userProps[prop]\n      } else {\n        console.warn(\n          `GawdViewer: Provided ${prop} in config but it is not a valid property and will be ignored`,\n        )\n      }\n    }\n  }\n\n  private initThree(): void {\n    if (!this.scene) {\n      this.scene = new Scene();\n\n      this.renderer = new WebGLRenderer({ antialias: true });\n      this.renderer.xr.enabled = false;\n      this._props.container.appendChild(this.renderer.domElement);\n\n      this.camera = new PerspectiveCamera(90, this.aspectRatio, 0.01, 1000);\n      this.camera.position.z = 10;\n      this.scene.add(this.camera);\n\n      this.resize()\n\n      this.renderer.setAnimationLoop(() => {\n        this.render()\n      });\n\n      window.addEventListener('resize', this.resize.bind(this))\n\n      if (this._props.toggleModes) {\n        this._props.container.addEventListener('click', this.toggleDisplayMode.bind(this))\n      }\n    }\n  }\n\n  private resize(): void {\n    this.camera.aspect = this.aspectRatio\n    this.camera.updateProjectionMatrix()\n    this.renderer.setSize(this._props.container.clientWidth, this._props.container.clientHeight)\n  }\n\n  private isMobile(): boolean {\n    const result = detect()\n    return result.os.match(/iOS|android/i) != null\n  }\n\n  private initGawd(gawd: Gawd): void {\n    this.gawd = gawd\n    let defaultAsset: GawdAsset = null;\n\n    // Default mobile asset\n    if (this.isMobile()) {\n      defaultAsset = gawd.assets.filter(a =>\n        a.spatial == this._props.defaultMobileAsset.spatial &&\n        a.size.width == this._props.defaultMobileAsset.size.width &&\n        (a.quiltType == this._props.defaultMobileAsset.quiltType || !this._props.defaultMobileAsset.quiltType) &&\n        a.contentType == this._props.defaultMobileAsset.contentType)[0]\n    }\n\n    // Default desktop asset\n    if (!defaultAsset) {\n      defaultAsset = gawd.assets.filter(a =>\n        a.spatial == this._props.defaultAsset.spatial &&\n        a.size.width == this._props.defaultAsset.size.width &&\n        (a.quiltType == this._props.defaultAsset.quiltType || !this._props.defaultAsset.quiltType) &&\n        a.contentType == this._props.defaultAsset.contentType)[0]\n    }\n\n    this.initThumbnail()\n    this.initMedia(defaultAsset)\n  }\n\n  private initThumbnail(): void {\n    // Get preferred thumb size\n    // if not, found it will use the next smallest thumb\n    let thumbUrl = this.gawd.assets\n      .sort((a1, a2) => a1.size.width - a2.size.width)\n      .find((asset) => asset.contentType == 'image/png' && asset.size.width >= this._props.defaultThumbnailSize).url\n\n    this.thumbnail = document.createElement('img') as HTMLImageElement\n    this.thumbnail.src = thumbUrl\n    this.thumbnail.crossOrigin = \"anonymous\"\n    this.thumbnail.style.width = \"100%\"\n    this.thumbnail.style.height = \"100%\"\n    this.thumbnail.style.position = \"absolute\"\n    this.thumbnail.style.left = \"0\"\n    this._props.container.appendChild(this.thumbnail)\n  }\n\n  private hideThumb(): void {\n    this.hideThumbnail = true\n    this.thumbCurTime = 0\n  }\n\n  private initMedia(asset: GawdAsset, onLoad?: () => void): void {\n    if (!asset) {\n      console.warn(\"No GawdAsset found!\");\n      return\n    }\n\n    if (asset.contentType == \"image/png\") {\n      const loader = new TextureLoader()\n      loader.load(asset.url, function (tex) {\n        this.loadSpatialPlayer(tex, asset)\n        this.hideThumb()\n        if (onLoad) {\n          onLoad()\n        }\n      }.bind(this))\n    }\n    else if (asset.contentType == 'video/mp4') {\n      this.initVideo(asset, () => {\n        const videoTex = new VideoTexture(this.video);\n        this.loadSpatialPlayer(videoTex, asset)\n        this.hideThumb()\n        if (onLoad) {\n          onLoad()\n        }\n      })\n    }\n  }\n\n  private initVideo(asset: GawdAsset, onLoad?: () => any): void {\n    const videoId = \"gawd-video-\" + this.gawd.hash\n    this.video = document.getElementById(videoId) as HTMLVideoElement\n\n    if (!this.video) {\n      this.video = document.createElement('video') as HTMLVideoElement\n      this.video.id = videoId\n      this.video.crossOrigin = \"anonymous\"\n      this.video.muted = true\n      this.video.preload = \"auto\"\n      this.video.autoplay = true\n      this.video.loop = true\n      this.video.playsInline = true\n      this.video.style.width = \"100%\"\n      this.video.style.height = \"100%\"\n      this.video.style.display = \"none\"\n      this.props.container.appendChild(this.video);\n    }\n\n    if (onLoad) {\n      this.video.ontimeupdate = function () {\n        if (this.video.currentTime > 0) {\n          onLoad()\n          this.video.ontimeupdate = null\n          onLoad = null\n        }\n      }.bind(this)\n\n      this.video.src = asset.url\n      this.video.play();\n    }\n  }\n\n\n  private loadSpatialPlayer(texture: Texture, asset: GawdAsset): void {\n    let config = new QuiltConfig();\n\n    this.initThree()\n\n    if (asset.quilt) {\n      config.columns = asset.quilt.columns > 0 ? asset.quilt.columns : 8\n      config.rows = asset.quilt.rows > 0 ? asset.quilt.rows : 6\n      config.width = asset.viewSize.width > 0 ? asset.viewSize.width : 480\n      config.height = asset.viewSize.height > 0 ? asset.viewSize.height : 640\n      this._props.spatialProps.quilt = config\n\n      this.spatialPlayer = new SpatialPlayer(texture, null, this._props.spatialProps)\n      this.totalAngles = this.spatialPlayer.quiltColumns * this.spatialPlayer.quiltRows\n      this.spatialPlayer.quiltAngle = this.targetAngle = this.totalAngles / 2 // starting angle\n      this.scene.add(this.spatialPlayer)\n\n      let dist = this.camera.position.z - this.spatialPlayer.position.z\n      let height = this.aspectRatio; // desired height to fit WHY IS THIS CALLED HEIGHT?\n      this.camera.fov = Math.atan(height / dist) * (180 / Math.PI)\n      this.camera.updateProjectionMatrix();\n\n      if (this._props.enableMouseMove) {\n        window.addEventListener('mousemove', this.onMouseMove.bind(this))\n      }\n    }\n    else {\n      this.video.style.display = ''\n      this._props.enableMouseMove = false\n    }\n  }\n\n  private toggleDisplayMode(): void {\n    if (this.spatialPlayer) {\n      this.spatialPlayer.quiltStereoEyeDistance = 8\n\n      if (this.video && this.video.style.display == '') {\n        this.video.style.display = 'none'\n        this.video.pause()\n        this.renderer.domElement.style.display = ''\n        this.spatialPlayer.stereoMode = StereoMode.OFF\n      }\n      else if (this.spatialPlayer.stereoMode == StereoMode.OFF) {\n        this.spatialPlayer.stereoMode = StereoMode.COLOR\n      }\n      else if (this.spatialPlayer.stereoMode == StereoMode.COLOR) {\n        this.initVideo(this.getAnimationAsset())\n        this.renderer.domElement.style.display = 'none'\n        this.video.style.display = ''\n        this.video.play()\n      }\n    }\n    else {\n      this._props.enableMouseMove = true\n      this.initMedia(this.getQuiltPNGAsset(), function () {\n        this.video.style.display = 'none'\n        this.renderer.domElement.style.display = ''\n        this.spatialPlayer.stereoMode = StereoMode.OFF\n      }.bind(this))\n    }\n  }\n\n  private getQuiltPNGAsset(): GawdAsset {\n    return this.gawd.assets\n      .find((asset) => asset.contentType == 'image/png'\n        && asset.quiltType == 'FourKSquare')\n  }\n\n  private getAnimationAsset(): GawdAsset {\n    return this.gawd.assets\n      .sort((a1, a2) => a2.size.width - a1.size.width)\n      .find((asset) => asset.contentType == this._props.animationAsset.contentType\n        && asset.size.width <= this._props.animationAsset.size.width\n        && asset.spatial == this._props.animationAsset.spatial)\n  }\n\n  private async loadGawdConfig(url: string): Promise<any> {\n    const response = await fetch(url)\n    return await response.json()\n  }\n\n  private onMouseMove(e: MouseEvent): void {\n    if (this.spatialPlayer) {\n      this.targetAngle = (1 - (e.clientX / window.innerWidth)) * (this.totalAngles - 1)\n      this.startAngle = this.spatialPlayer.quiltAngle\n      this.aniCurTime = 0\n    }\n  }\n\n  private render(): void {\n    let delta = this.clock.getDelta()\n    if (this._props.enableMouseMove) {\n      this.aniCurTime += delta\n\n      if (this.spatialPlayer && this.aniCurTime / this.aniDuration <= 1 && this.thumbnail.style.opacity == \"0\") {\n        this.spatialPlayer.quiltAngle = Math.round(this.lerp(\n          this.startAngle,\n          this.targetAngle,\n          this.EasingFunctions.easeOutCubic(this.aniCurTime / this.aniDuration)\n        ))\n      }\n    }\n\n    if (this.hideThumbnail) {\n      this.thumbCurTime += delta\n\n      if (this.thumbnail && this.thumbnail.style.opacity != \"0\") {\n        this.thumbnail.style.opacity = this.lerp(1, 0,\n          this.EasingFunctions.linear(this.thumbCurTime / 0.25)\n        ).toString()\n      }\n    }\n\n    if (this.scene) {\n      this.renderer.render(this.scene, this.camera)\n    }\n  }\n\n  private lerp(value1: number, value2: number, amount: number) {\n    amount = amount < 0 ? 0 : amount;\n    amount = amount > 1 ? 1 : amount;\n    return value1 + (value2 - value1) * amount;\n  }\n\n  public dispose(): void {\n    if (this.scene) {\n      this.scene.remove(this.spatialPlayer)\n    }\n\n    if (this.spatialPlayer) {\n      this.spatialPlayer.dispose()\n    }\n\n    if (this.thumbnail) {\n      this.thumbnail.remove()\n    }\n\n    if (this.video) {\n      this.video.remove()\n    }\n\n    if (this.renderer?.domElement) {\n      this.renderer.domElement.remove()\n    }\n\n    window.removeEventListener('mousemove', this.onMouseMove.bind(this))\n    window.removeEventListener('resize', this.resize.bind(this))\n  }\n\n  public get aspectRatio(): number {\n    return this._props.container.clientWidth / this._props.container.clientHeight\n  }\n\n  public get props(): PlayerProps {\n    return this._props\n  }\n\n  EasingFunctions = {\n    // no easing, no acceleration\n    linear: t => t,\n    // accelerating from zero velocity\n    easeInQuad: t => t * t,\n    // decelerating to zero velocity\n    easeOutQuad: t => t * (2 - t),\n    // acceleration until halfway, then deceleration\n    easeInOutQuad: t => t < .5 ? 2 * t * t : -1 + (4 - 2 * t) * t,\n    // accelerating from zero velocity\n    easeInCubic: t => t * t * t,\n    // decelerating to zero velocity\n    easeOutCubic: t => (--t) * t * t + 1,\n    // acceleration until halfway, then deceleration\n    easeInOutCubic: t => t < .5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1,\n    // accelerating from zero velocity\n    easeInQuart: t => t * t * t * t,\n    // decelerating to zero velocity\n    easeOutQuart: t => 1 - (--t) * t * t * t,\n    // acceleration until halfway, then deceleration\n    easeInOutQuart: t => t < .5 ? 8 * t * t * t * t : 1 - 8 * (--t) * t * t * t,\n    // accelerating from zero velocity\n    easeInQuint: t => t * t * t * t * t,\n    // decelerating to zero velocity\n    easeOutQuint: t => 1 + (--t) * t * t * t * t,\n    // acceleration until halfway, then deceleration\n    easeInOutQuint: t => t < .5 ? 16 * t * t * t * t * t : 1 + 16 * (--t) * t * t * t * t\n  }\n}\n"],"names":["__spreadArray","to","from","pack","arguments","length","ar","i","l","Array","prototype","slice","call","concat","BrowserInfo","name","version","os","this","type","NodeInfo","process","platform","SearchBotDeviceInfo","bot","BotInfo","ReactNativeInfo","SEARCHBOT_OS_REGEX","userAgentRules","operatingSystemRules","detect","userAgent","parseUserAgent","document","navigator","product","ua","matchedRule","reduce","matched","_a","browser","regex","uaMatch","exec","matchUserAgent","match","versionParts","split","join","count","output","ii","push","createVersionParts","detectOS","searchBotMatch","Props","url","container","enableMouseMove","toggleModes","defaultThumbnailSize","defaultAsset","GawdAsset","spatial","quiltType","size","Resolution","width","contentType","defaultMobileAsset","animationAsset","spatialProps","spatialType","SpatialType","LOOKING_GLASS","stereoMode","StereoMode","OFF","quilt","gawdData","Gawd","constructor","init","hash","assets","Object","assign","viewSize","GawdQuilt","columns","rows","height","Player","props","_props","scene","renderer","spatialPlayer","camera","clock","gawd","video","thumbnail","startAngle","targetAngle","totalAngles","aniCurTime","aniDuration","hideThumbnail","thumbCurTime","EasingFunctions","linear","t","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","setProps","Clock","initGawd","loadGawdConfig","then","data","_this","console","warn","playerProps","userProps","prop","initThree","Scene","WebGLRenderer","antialias","xr","enabled","appendChild","domElement","PerspectiveCamera","aspectRatio","position","z","add","resize","setAnimationLoop","_this2","render","window","addEventListener","bind","toggleDisplayMode","aspect","updateProjectionMatrix","setSize","clientWidth","clientHeight","isMobile","filter","a","_this3","initThumbnail","initMedia","thumbUrl","sort","a1","a2","find","asset","_this4","createElement","src","crossOrigin","style","left","hideThumb","onLoad","TextureLoader","load","tex","loadSpatialPlayer","initVideo","videoTex","VideoTexture","_this5","videoId","getElementById","id","muted","preload","autoplay","loop","playsInline","display","ontimeupdate","currentTime","play","texture","config","QuiltConfig","SpatialPlayer","quiltColumns","quiltRows","quiltAngle","dist","fov","Math","atan","PI","onMouseMove","quiltStereoEyeDistance","pause","COLOR","getAnimationAsset","getQuiltPNGAsset","_this6","response","fetch","json","e","clientX","innerWidth","delta","getDelta","opacity","round","lerp","toString","value1","value2","amount","dispose","remove","removeEventListener"],"mappings":"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"}