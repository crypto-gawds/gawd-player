{"version":3,"file":"gawd-player.js","sources":["../node_modules/detect-browser/es/index.js","../src/components/player.ts"],"sourcesContent":["var __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nvar BrowserInfo = /** @class */ (function () {\n    function BrowserInfo(name, version, os) {\n        this.name = name;\n        this.version = version;\n        this.os = os;\n        this.type = 'browser';\n    }\n    return BrowserInfo;\n}());\nexport { BrowserInfo };\nvar NodeInfo = /** @class */ (function () {\n    function NodeInfo(version) {\n        this.version = version;\n        this.type = 'node';\n        this.name = 'node';\n        this.os = process.platform;\n    }\n    return NodeInfo;\n}());\nexport { NodeInfo };\nvar SearchBotDeviceInfo = /** @class */ (function () {\n    function SearchBotDeviceInfo(name, version, os, bot) {\n        this.name = name;\n        this.version = version;\n        this.os = os;\n        this.bot = bot;\n        this.type = 'bot-device';\n    }\n    return SearchBotDeviceInfo;\n}());\nexport { SearchBotDeviceInfo };\nvar BotInfo = /** @class */ (function () {\n    function BotInfo() {\n        this.type = 'bot';\n        this.bot = true; // NOTE: deprecated test name instead\n        this.name = 'bot';\n        this.version = null;\n        this.os = null;\n    }\n    return BotInfo;\n}());\nexport { BotInfo };\nvar ReactNativeInfo = /** @class */ (function () {\n    function ReactNativeInfo() {\n        this.type = 'react-native';\n        this.name = 'react-native';\n        this.version = null;\n        this.os = null;\n    }\n    return ReactNativeInfo;\n}());\nexport { ReactNativeInfo };\n// tslint:disable-next-line:max-line-length\nvar SEARCHBOX_UA_REGEX = /alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/;\nvar SEARCHBOT_OS_REGEX = /(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\\ Jeeves\\/Teoma|ia_archiver)/;\nvar REQUIRED_VERSION_PARTS = 3;\nvar userAgentRules = [\n    ['aol', /AOLShield\\/([0-9\\._]+)/],\n    ['edge', /Edge\\/([0-9\\._]+)/],\n    ['edge-ios', /EdgiOS\\/([0-9\\._]+)/],\n    ['yandexbrowser', /YaBrowser\\/([0-9\\._]+)/],\n    ['kakaotalk', /KAKAOTALK\\s([0-9\\.]+)/],\n    ['samsung', /SamsungBrowser\\/([0-9\\.]+)/],\n    ['silk', /\\bSilk\\/([0-9._-]+)\\b/],\n    ['miui', /MiuiBrowser\\/([0-9\\.]+)$/],\n    ['beaker', /BeakerBrowser\\/([0-9\\.]+)/],\n    ['edge-chromium', /EdgA?\\/([0-9\\.]+)/],\n    [\n        'chromium-webview',\n        /(?!Chrom.*OPR)wv\\).*Chrom(?:e|ium)\\/([0-9\\.]+)(:?\\s|$)/,\n    ],\n    ['chrome', /(?!Chrom.*OPR)Chrom(?:e|ium)\\/([0-9\\.]+)(:?\\s|$)/],\n    ['phantomjs', /PhantomJS\\/([0-9\\.]+)(:?\\s|$)/],\n    ['crios', /CriOS\\/([0-9\\.]+)(:?\\s|$)/],\n    ['firefox', /Firefox\\/([0-9\\.]+)(?:\\s|$)/],\n    ['fxios', /FxiOS\\/([0-9\\.]+)/],\n    ['opera-mini', /Opera Mini.*Version\\/([0-9\\.]+)/],\n    ['opera', /Opera\\/([0-9\\.]+)(?:\\s|$)/],\n    ['opera', /OPR\\/([0-9\\.]+)(:?\\s|$)/],\n    ['ie', /Trident\\/7\\.0.*rv\\:([0-9\\.]+).*\\).*Gecko$/],\n    ['ie', /MSIE\\s([0-9\\.]+);.*Trident\\/[4-7].0/],\n    ['ie', /MSIE\\s(7\\.0)/],\n    ['bb10', /BB10;\\sTouch.*Version\\/([0-9\\.]+)/],\n    ['android', /Android\\s([0-9\\.]+)/],\n    ['ios', /Version\\/([0-9\\._]+).*Mobile.*Safari.*/],\n    ['safari', /Version\\/([0-9\\._]+).*Safari/],\n    ['facebook', /FBAV\\/([0-9\\.]+)/],\n    ['instagram', /Instagram\\s([0-9\\.]+)/],\n    ['ios-webview', /AppleWebKit\\/([0-9\\.]+).*Mobile/],\n    ['ios-webview', /AppleWebKit\\/([0-9\\.]+).*Gecko\\)$/],\n    ['searchbot', SEARCHBOX_UA_REGEX],\n];\nvar operatingSystemRules = [\n    ['iOS', /iP(hone|od|ad)/],\n    ['Android OS', /Android/],\n    ['BlackBerry OS', /BlackBerry|BB10/],\n    ['Windows Mobile', /IEMobile/],\n    ['Amazon OS', /Kindle/],\n    ['Windows 3.11', /Win16/],\n    ['Windows 95', /(Windows 95)|(Win95)|(Windows_95)/],\n    ['Windows 98', /(Windows 98)|(Win98)/],\n    ['Windows 2000', /(Windows NT 5.0)|(Windows 2000)/],\n    ['Windows XP', /(Windows NT 5.1)|(Windows XP)/],\n    ['Windows Server 2003', /(Windows NT 5.2)/],\n    ['Windows Vista', /(Windows NT 6.0)/],\n    ['Windows 7', /(Windows NT 6.1)/],\n    ['Windows 8', /(Windows NT 6.2)/],\n    ['Windows 8.1', /(Windows NT 6.3)/],\n    ['Windows 10', /(Windows NT 10.0)/],\n    ['Windows ME', /Windows ME/],\n    ['Open BSD', /OpenBSD/],\n    ['Sun OS', /SunOS/],\n    ['Chrome OS', /CrOS/],\n    ['Linux', /(Linux)|(X11)/],\n    ['Mac OS', /(Mac_PowerPC)|(Macintosh)/],\n    ['QNX', /QNX/],\n    ['BeOS', /BeOS/],\n    ['OS/2', /OS\\/2/],\n];\nexport function detect(userAgent) {\n    if (!!userAgent) {\n        return parseUserAgent(userAgent);\n    }\n    if (typeof document === 'undefined' &&\n        typeof navigator !== 'undefined' &&\n        navigator.product === 'ReactNative') {\n        return new ReactNativeInfo();\n    }\n    if (typeof navigator !== 'undefined') {\n        return parseUserAgent(navigator.userAgent);\n    }\n    return getNodeVersion();\n}\nfunction matchUserAgent(ua) {\n    // opted for using reduce here rather than Array#first with a regex.test call\n    // this is primarily because using the reduce we only perform the regex\n    // execution once rather than once for the test and for the exec again below\n    // probably something that needs to be benchmarked though\n    return (ua !== '' &&\n        userAgentRules.reduce(function (matched, _a) {\n            var browser = _a[0], regex = _a[1];\n            if (matched) {\n                return matched;\n            }\n            var uaMatch = regex.exec(ua);\n            return !!uaMatch && [browser, uaMatch];\n        }, false));\n}\nexport function browserName(ua) {\n    var data = matchUserAgent(ua);\n    return data ? data[0] : null;\n}\nexport function parseUserAgent(ua) {\n    var matchedRule = matchUserAgent(ua);\n    if (!matchedRule) {\n        return null;\n    }\n    var name = matchedRule[0], match = matchedRule[1];\n    if (name === 'searchbot') {\n        return new BotInfo();\n    }\n    var versionParts = match[1] && match[1].split(/[._]/).slice(0, 3);\n    if (versionParts) {\n        if (versionParts.length < REQUIRED_VERSION_PARTS) {\n            versionParts = __spreadArrays(versionParts, createVersionParts(REQUIRED_VERSION_PARTS - versionParts.length));\n        }\n    }\n    else {\n        versionParts = [];\n    }\n    var version = versionParts.join('.');\n    var os = detectOS(ua);\n    var searchBotMatch = SEARCHBOT_OS_REGEX.exec(ua);\n    if (searchBotMatch && searchBotMatch[1]) {\n        return new SearchBotDeviceInfo(name, version, os, searchBotMatch[1]);\n    }\n    return new BrowserInfo(name, version, os);\n}\nexport function detectOS(ua) {\n    for (var ii = 0, count = operatingSystemRules.length; ii < count; ii++) {\n        var _a = operatingSystemRules[ii], os = _a[0], regex = _a[1];\n        var match = regex.exec(ua);\n        if (match) {\n            return os;\n        }\n    }\n    return null;\n}\nexport function getNodeVersion() {\n    var isNode = typeof process !== 'undefined' && process.version;\n    return isNode ? new NodeInfo(process.version.slice(1)) : null;\n}\nfunction createVersionParts(count) {\n    var output = [];\n    for (var ii = 0; ii < count; ii++) {\n        output.push('0');\n    }\n    return output;\n}\n","import { SpatialType, StereoMode, SpatialPlayer, QuiltConfig, SpatialProps } from './spatial-viewer'\nimport { WebGLRenderer, PerspectiveCamera, Scene, TextureLoader, Texture, VideoTexture } from './three'\nimport { detect } from 'detect-browser';\nimport { Clock } from 'three';\nimport { PlayerProps } from '..';\n\nclass Props {\n  public url: string\n  public container: HTMLElement\n  public enableMouseMove: Boolean = true\n  public toggleModes: Boolean = false\n  public defaultThumbnailSize: number = 640\n  public defaultAsset: GawdAsset = new GawdAsset({\n    spatial: 'lookingglass',\n    quiltType: 'FourKSquare',\n    size: new Resolution({ width: 4320 }),\n    contentType: 'image/png'\n  })\n\n  public defaultMobileAsset: GawdAsset = new GawdAsset({\n    spatial: '2d',\n    size: new Resolution({ width: 1080 }),\n    contentType: 'video/mp4'\n  })\n\n  public animationAsset: GawdAsset = new GawdAsset({\n    spatial: '2d',\n    size: new Resolution({ width: 1080 }),\n    contentType: 'video/mp4'\n  })\n\n  public spatialProps: SpatialProps = {\n    spatialType: SpatialType.LOOKING_GLASS,\n    stereoMode: StereoMode.OFF,\n    quilt: null\n  }\n\n  public gawdData: Gawd // optionally pass in all the data (instead of loading via json)\n}\n\nclass Gawd {\n  public name: string\n  public hash: string\n  public assets: Array<GawdAsset>\n\n  public constructor(init?: Partial<Gawd>) {\n    Object.assign(this, init);\n  }\n}\n\nclass GawdAsset {\n  public url: string\n  public spatial: string\n  public quilt: GawdQuilt\n  public quiltType: string\n  public size: Resolution\n  public viewSize: Resolution\n  public contentType: string\n\n  public constructor(init?: Partial<GawdAsset>) {\n    Object.assign(this, init);\n  }\n}\n\nclass GawdQuilt {\n  public columns: number\n  public rows: number\n\n  public constructor(init?: Partial<GawdQuilt>) {\n    Object.assign(this, init);\n  }\n}\n\nclass Resolution {\n  public width: number\n  public height: number\n\n  public constructor(init?: Partial<Resolution>) {\n    Object.assign(this, init);\n  }\n}\n\nexport { Props as PlayerProps, Gawd, GawdAsset, GawdQuilt, Resolution }\n\nexport default class Player {\n\n  private _props: Props = new Props()\n  private scene: Scene\n  private renderer: WebGLRenderer\n  private spatialPlayer: SpatialPlayer\n  private camera: PerspectiveCamera\n  private clock: Clock\n  private gawd: Gawd\n  private video: HTMLVideoElement\n  private thumbnail: HTMLImageElement\n\n  // Animation\n  private startAngle: number = 0\n  private targetAngle: number = 0\n  private totalAngles: number = 0\n  private aniCurTime: number = 0\n  private aniDuration: number = 0.5\n\n  private hideThumbnail: boolean = false\n  private thumbCurTime: number = 0\n\n  constructor(props?: Props) {\n    this.setProps(this._props, props)\n\n    this.clock = new Clock();\n\n    if (!this._props.container) {\n      console.warn(`No container was set`)\n      return;\n    }\n\n    // If passing in gawd data direclty, then just load immediately\n    if (this._props.gawdData && this._props.gawdData.assets && this._props.gawdData.assets.length > 0) {\n      this.initGawd(this._props.gawdData)\n    }\n    // Otherwise load from json url\n    else if (this._props.url) {\n      this.loadGawdConfig(this._props.url).then(data => {\n        this.initGawd(data)\n      });\n    }\n  }\n\n  private setProps(playerProps: Props, userProps?: object): void {\n    if (!userProps) return\n\n    for (let prop in userProps) {\n      if (prop in playerProps) {\n        playerProps[prop] = userProps[prop]\n      } else {\n        console.warn(\n          `GawdViewer: Provided ${prop} in config but it is not a valid property and will be ignored`,\n        )\n      }\n    }\n  }\n\n  private initThree(): void {\n    if (!this.scene) {\n      this.scene = new Scene();\n\n      this.renderer = new WebGLRenderer({ antialias: true });\n      this.renderer.xr.enabled = false;\n      this._props.container.appendChild(this.renderer.domElement);\n\n      this.camera = new PerspectiveCamera(90, this.aspectRatio, 0.01, 1000);\n      this.camera.position.z = 10;\n      this.scene.add(this.camera);\n\n      this.resize()\n\n      this.renderer.setAnimationLoop(() => {\n        this.render()\n      });\n\n      window.addEventListener('resize', this.resize.bind(this))\n\n      if (this._props.toggleModes) {\n        this._props.container.addEventListener('click', this.toggleDisplayMode.bind(this))\n      }\n    }\n  }\n\n  private resize(): void {\n    this.camera.aspect = this.aspectRatio\n    this.camera.updateProjectionMatrix()\n    this.renderer.setSize(this._props.container.clientWidth, this._props.container.clientHeight)\n  }\n\n  private initGawd(gawd: Gawd): void {\n    this.gawd = gawd\n\n    const result = detect()\n    let defaultAsset: GawdAsset = null;\n\n    // Default mobile asset \n    if (result.os.match(/iOS|android/i)) {\n      defaultAsset = gawd.assets.filter(a =>\n        a.spatial == this._props.defaultMobileAsset.spatial &&\n        a.size.width == this._props.defaultMobileAsset.size.width &&\n        (a.quiltType == this._props.defaultMobileAsset.quiltType || !this._props.defaultMobileAsset.quiltType) &&\n        a.contentType == this._props.defaultMobileAsset.contentType)[0]\n    }\n\n    // Default desktop asset\n    if (!defaultAsset) {\n      defaultAsset = gawd.assets.filter(a =>\n        a.spatial == this._props.defaultAsset.spatial &&\n        a.size.width == this._props.defaultAsset.size.width &&\n        (a.quiltType == this._props.defaultAsset.quiltType || !this._props.defaultAsset.quiltType) &&\n        a.contentType == this._props.defaultAsset.contentType)[0]\n    }\n\n    this.initThumbnail()\n    this.initMedia(defaultAsset)\n  }\n\n  private initThumbnail(): void {\n    // Get preferred thumb size\n    // if not, found it will use the next smallest thumb\n    let thumbUrl = this.gawd.assets\n      .sort((a1, a2) => a1.size.width - a2.size.width)\n      .find((asset) => asset.contentType == 'image/png' && asset.size.width >= this._props.defaultThumbnailSize).url\n\n    this.thumbnail = document.createElement('img') as HTMLImageElement\n    this.thumbnail.src = thumbUrl\n    this.thumbnail.crossOrigin = \"anonymous\"\n    this.thumbnail.style.width = \"100%\"\n    this.thumbnail.style.height = \"100%\"\n    this.thumbnail.style.position = \"absolute\"\n    this.thumbnail.style.left = \"0\"\n    this._props.container.appendChild(this.thumbnail)\n  }\n\n  private hideThumb(): void {\n    this.hideThumbnail = true\n    this.thumbCurTime = 0\n  }\n\n  private initMedia(asset: GawdAsset, onLoad?: () => void): void {\n    if (!asset) {\n      console.warn(\"No GawdAsset found!\");\n      return\n    }\n\n    if (asset.contentType == \"image/png\") {\n      const loader = new TextureLoader()\n      loader.load(asset.url, function (tex) {\n        this.loadSpatialPlayer(tex, asset)\n        this.hideThumb()\n        if (onLoad) {\n          onLoad()\n        }\n      }.bind(this))\n    }\n    else if (asset.contentType == 'video/mp4') {\n      this.initVideo(asset, () => {\n        const videoTex = new VideoTexture(this.video);\n        this.loadSpatialPlayer(videoTex, asset)\n        this.hideThumb()\n        if (onLoad) {\n          onLoad()\n        }\n      })\n    }\n  }\n\n  private initVideo(asset: GawdAsset, onLoad?: () => any): void {\n    const videoId = \"gawd-video-\" + this.gawd.hash\n    this.video = document.getElementById(videoId) as HTMLVideoElement\n\n    if (!this.video) {\n      this.video = document.createElement('video') as HTMLVideoElement\n      this.video.id = videoId\n      this.video.crossOrigin = \"anonymous\"\n      this.video.muted = true\n      this.video.preload = \"auto\"\n      this.video.autoplay = true\n      this.video.loop = true\n      this.video.playsInline = true\n      this.video.style.width = \"100%\"\n      this.video.style.height = \"100%\"\n      this.video.style.display = \"none\"\n      this.props.container.appendChild(this.video);\n\n    }\n    \n    if (onLoad) {\n      this.video.ontimeupdate = function () {\n        if (this.video.currentTime > 0) {\n          onLoad()\n          this.video.ontimeupdate = null\n          onLoad = null\n        }\n      }.bind(this)\n\n      this.video.src = asset.url\n      this.video.play();\n    }\n  }\n\n\n  private loadSpatialPlayer(texture: Texture, asset: GawdAsset): void {\n    let config = new QuiltConfig();\n\n    this.initThree()\n\n    if (asset.quilt) {\n      config.columns = asset.quilt.columns > 0 ? asset.quilt.columns : 8\n      config.rows = asset.quilt.rows > 0 ? asset.quilt.rows : 6\n      config.width = asset.viewSize.width > 0 ? asset.viewSize.width : 480\n      config.height = asset.viewSize.height > 0 ? asset.viewSize.height : 640\n      this._props.spatialProps.quilt = config\n\n      this.spatialPlayer = new SpatialPlayer(texture, null, this._props.spatialProps)\n      this.totalAngles = this.spatialPlayer.quiltColumns * this.spatialPlayer.quiltRows\n      this.spatialPlayer.quiltAngle = this.targetAngle = this.totalAngles / 2 // starting angle\n      this.scene.add(this.spatialPlayer)\n\n      let dist = this.camera.position.z - this.spatialPlayer.position.z\n      let height = this.aspectRatio; // desired height to fit WHY IS THIS CALLED HEIGHT?\n      this.camera.fov = Math.atan(height / dist) * (180 / Math.PI)\n      this.camera.updateProjectionMatrix();\n\n      if (this._props.enableMouseMove) {\n        window.addEventListener('mousemove', this.onMouseMove.bind(this))\n      }\n    }\n    else {\n      this.video.style.display = ''\n      this._props.enableMouseMove = false\n    }\n  }\n\n  private toggleDisplayMode(): void {\n    if (this.spatialPlayer) {\n      this.spatialPlayer.quiltStereoEyeDistance = 8\n\n      if (this.video && this.video.style.display == '') {\n        this.video.style.display = 'none'\n        this.renderer.domElement.style.display = ''\n        this.spatialPlayer.stereoMode = StereoMode.OFF\n      }\n      else if (this.spatialPlayer.stereoMode == StereoMode.OFF) {\n        this.spatialPlayer.stereoMode = StereoMode.COLOR\n      }\n      else if (this.spatialPlayer.stereoMode == StereoMode.COLOR) {\n        this.initVideo(this.getAnimationAsset())\n        this.renderer.domElement.style.display = 'none'\n        this.video.style.display = ''\n        this.video.play()\n      }\n    }\n    else {\n      this._props.enableMouseMove = true\n      this.initMedia(this.getQuiltPNGAsset(), function () {\n        this.video.style.display = 'none'\n        this.renderer.domElement.style.display = ''\n        this.spatialPlayer.stereoMode = StereoMode.OFF\n      }.bind(this))\n    }\n  }\n\n  private getQuiltPNGAsset(): GawdAsset {\n    return this.gawd.assets\n      .find((asset) => asset.contentType == 'image/png'\n        && asset.quiltType == 'FourKSquare')\n  }\n\n  private getAnimationAsset(): GawdAsset {\n    return this.gawd.assets\n      .sort((a1, a2) => a2.size.width - a1.size.width)\n      .find((asset) => asset.contentType == this._props.animationAsset.contentType\n        && asset.size.width <= this._props.animationAsset.size.width\n        && asset.spatial == this._props.animationAsset.spatial)\n  }\n\n  private async loadGawdConfig(url: string): Promise<any> {\n    const response = await fetch(url)\n    return await response.json()\n  }\n\n  private onMouseMove(e: MouseEvent): void {\n    if (this.spatialPlayer) {\n      this.targetAngle = (1 - (e.clientX / window.innerWidth)) * (this.totalAngles - 1)\n      this.startAngle = this.spatialPlayer.quiltAngle\n      this.aniCurTime = 0\n    }\n  }\n\n  private render(): void {\n    let delta = this.clock.getDelta()\n    if (this._props.enableMouseMove) {\n      this.aniCurTime += delta\n\n      if (this.spatialPlayer && this.aniCurTime / this.aniDuration <= 1 && this.thumbnail.style.opacity == \"0\") {\n        this.spatialPlayer.quiltAngle = Math.round(this.lerp(\n          this.startAngle,\n          this.targetAngle,\n          this.EasingFunctions.easeOutCubic(this.aniCurTime / this.aniDuration)\n        ))\n      }\n    }\n\n    if (this.hideThumbnail) {\n      this.thumbCurTime += delta\n\n      if (this.thumbnail && this.thumbnail.style.opacity != \"0\") {\n        this.thumbnail.style.opacity = this.lerp(1, 0,\n          this.EasingFunctions.linear(this.thumbCurTime / 0.25)\n        ).toString()\n      }\n    }\n\n    if (this.scene) {\n      this.renderer.render(this.scene, this.camera)\n    }\n  }\n\n  private lerp(value1: number, value2: number, amount: number) {\n    amount = amount < 0 ? 0 : amount;\n    amount = amount > 1 ? 1 : amount;\n    return value1 + (value2 - value1) * amount;\n  }\n\n  public dispose(): void {\n    if (this.scene) {\n      this.scene.remove(this.spatialPlayer)\n    }\n\n    if (this.spatialPlayer) {\n      this.spatialPlayer.dispose()\n    }\n\n    window.removeEventListener('mousemove', this.onMouseMove.bind(this))\n    window.removeEventListener('resize', this.resize.bind(this))\n  }\n\n  public get aspectRatio(): number {\n    return this._props.container.clientWidth / this._props.container.clientHeight\n  }\n\n  public get props(): PlayerProps {\n    return this._props\n  }\n\n  EasingFunctions = {\n    // no easing, no acceleration\n    linear: t => t,\n    // accelerating from zero velocity\n    easeInQuad: t => t * t,\n    // decelerating to zero velocity\n    easeOutQuad: t => t * (2 - t),\n    // acceleration until halfway, then deceleration\n    easeInOutQuad: t => t < .5 ? 2 * t * t : -1 + (4 - 2 * t) * t,\n    // accelerating from zero velocity \n    easeInCubic: t => t * t * t,\n    // decelerating to zero velocity \n    easeOutCubic: t => (--t) * t * t + 1,\n    // acceleration until halfway, then deceleration \n    easeInOutCubic: t => t < .5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1,\n    // accelerating from zero velocity \n    easeInQuart: t => t * t * t * t,\n    // decelerating to zero velocity \n    easeOutQuart: t => 1 - (--t) * t * t * t,\n    // acceleration until halfway, then deceleration\n    easeInOutQuart: t => t < .5 ? 8 * t * t * t * t : 1 - 8 * (--t) * t * t * t,\n    // accelerating from zero velocity\n    easeInQuint: t => t * t * t * t * t,\n    // decelerating to zero velocity\n    easeOutQuint: t => 1 + (--t) * t * t * t * t,\n    // acceleration until halfway, then deceleration \n    easeInOutQuint: t => t < .5 ? 16 * t * t * t * t * t : 1 + 16 * (--t) * t * t * t * t\n  }\n}\n"],"names":["this","Props","url","container","enableMouseMove","toggleModes","defaultThumbnailSize","defaultAsset","GawdAsset","spatial","quiltType","size","Resolution","width","contentType","defaultMobileAsset","animationAsset","spatialProps","spatialType","SpatialType","LOOKING_GLASS","stereoMode","StereoMode","OFF","quilt","gawdData","Gawd","constructor","init","name","hash","assets","Object","assign","viewSize","GawdQuilt","columns","rows","height","Player","props","_props","scene","renderer","spatialPlayer","camera","clock","gawd","video","thumbnail","startAngle","targetAngle","totalAngles","aniCurTime","aniDuration","hideThumbnail","thumbCurTime","EasingFunctions","linear","t","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","setProps","Clock","console","warn","length","initGawd","loadGawdConfig","then","data","playerProps","userProps","prop","initThree","Scene","WebGLRenderer","antialias","xr","enabled","appendChild","domElement","PerspectiveCamera","aspectRatio","position","z","add","resize","setAnimationLoop","render","window","addEventListener","bind","toggleDisplayMode","aspect","updateProjectionMatrix","setSize","clientWidth","clientHeight","result","detect","os","match","filter","a","initThumbnail","initMedia","thumbUrl","sort","a1","a2","find","asset","document","createElement","src","crossOrigin","style","left","hideThumb","onLoad","loader","TextureLoader","load","tex","loadSpatialPlayer","initVideo","videoTex","VideoTexture","videoId","getElementById","id","muted","preload","autoplay","loop","playsInline","display","ontimeupdate","currentTime","play","texture","config","QuiltConfig","SpatialPlayer","quiltColumns","quiltRows","quiltAngle","dist","fov","Math","atan","PI","onMouseMove","quiltStereoEyeDistance","COLOR","getAnimationAsset","getQuiltPNGAsset","response","fetch","json","e","clientX","innerWidth","delta","getDelta","opacity","round","lerp","toString","value1","value2","amount","dispose","remove","removeEventListener"],"mappings":"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"}